---
const { canvaName } = Astro.props;
---

<script>
  import { Application } from "@splinetool/runtime";

  import { gsap } from "gsap";
  import { ScrollTrigger } from "gsap/ScrollTrigger";
  gsap.registerPlugin(ScrollTrigger);
  const canvas = document.getElementById("model1") as HTMLCanvasElement;
  const spline = new Application(canvas, { renderMode: "auto" });
  const botonJovenes = document.getElementById(
    "JovenesBoton"
  ) as HTMLButtonElement;

  const botonAdultos = document.getElementById(
    "AdultoBoton"
  ) as HTMLButtonElement;

  spline
    .load("https://draft.spline.design/mOrteyUtksaAO4ZH/scene.splinecode")
    .then(() => {
      const escenaJovenes = spline.findObjectByName("Jovenes");

      const PlataformJovenes = spline.findObjectByName("PlataformJovenes");

      const escenaAdultos = spline.findObjectByName("Adultos");

      const PlataformAdultos = spline.findObjectByName("PlataformAdultos");

      // Manejo de modelo de Jovenes
      if (
        PlataformJovenes &&
        escenaJovenes &&
        escenaAdultos &&
        PlataformAdultos
      ) {
        // window.addEventListener("resize", () => {
        //   if (window.innerWidth > 768) {
        //     gsap.set(escenaJovenes.position, {
        //       x: 0,
        //       y: 0,
        //       z: 0,
        //     });
        //   } else {
        //     gsap.set(escenaJovenes.position, {
        //       x: -1130,
        //       y: 0,
        //       z: 0,
        //     });
        //   }

        //   if (window.innerWidth > 768) {
        //     gsap.set(escenaAdultos.position, {
        //       x: -1130,
        //       y: 50,
        //     });
        //   } else {
        //     gsap.set(escenaAdultos.position, {
        //       x: -70,
        //       y: 1200,
        //     });
        //   }
        // });

        if (window.innerWidth > 768) {
          gsap.set(escenaJovenes.position, {
            x: 0,
            y: 0,
            z: 0,
          });
        } else {
          gsap.set(escenaJovenes.position, {
            x: -1400,
            y: 0,
            z: 0,
          });
        }

        gsap.set(escenaJovenes.scale, {
          onComplete: () => {
            gsap.to(escenaJovenes.scale, {
              x: 0.75,
              y: 0.75,
              z: 0.75,
              duration: 1.5,
              ease: "none",
            });
          },
        });

        gsap.to(PlataformJovenes.rotation, {
          y: Math.PI * 4,
          repeat: -1,
          duration: 8,
          ease: "none",
        });

        // Hover of scene Jovenes

        botonJovenes.addEventListener("mouseover", () => {
          gsap.set(escenaJovenes.scale, {
            onComplete: () => {
              gsap.to(escenaJovenes.scale, {
                x: 0.85,
                y: 0.85,
                z: 0.85,
                duration: 0.2,
                ease: "none",
              });
            },
          });
        });
        botonJovenes.addEventListener("mouseout", () => {
          gsap.set(escenaJovenes.scale, {
            onComplete: () => {
              gsap.to(escenaJovenes.scale, {
                x: 0.75,
                y: 0.75,
                z: 0.75,
                duration: 0.2,
                ease: "none",
              });
            },
          });
        });

        // Manejo de modelo de Adultos
        if (window.innerWidth > 768) {
          gsap.set(escenaAdultos.position, {
            x: -1130,
            y: 50,
          });
        } else {
          gsap.set(escenaAdultos.position, {
            x: -70,
            y: 1200,
          });

          gsap.to(escenaJovenes.position, {
            scrollTrigger: {
            trigger: "#JovenesBoton",
            start: "top 60%",
            end: "bottom 70%",
            //markers: true,
            scrub: true,
            toggleActions: "restart none reverse none",
          },
          x: 0,
          y: 0,
          z: 0,
            
          
          
        });

        gsap.to(escenaAdultos.position, {
          scrollTrigger: {
            trigger: "#JovenesBoton",
            start: "top 60%",
            end: "bottom 70%",
            // markers: true,
            scrub: true,
            toggleActions: "restart none reverse none",
          },
          x: 1500,
        });



        }

        gsap.set(escenaAdultos.scale, {
          onComplete: () => {
            gsap.to(escenaAdultos.scale, {
              x: 0.85,
              y: 0.85,
              z: 0.85,
              duration: 1.5,
              ease: "none",
            });
          },
        });

        gsap.to(PlataformAdultos.rotation, {
          y: Math.PI * 4,
          repeat: -1,
          duration: 8,
          ease: "none",
        });
        // Hover of scene Adultos

        botonAdultos.addEventListener("mouseover", () => {
          gsap.set(escenaAdultos.scale, {
            onComplete: () => {
              gsap.to(escenaAdultos.scale, {
                x: 0.95,
                y: 0.95,
                z: 0.95,
                duration: 0.2,
                ease: "none",
              });
            },
          });
        });
        botonAdultos.addEventListener("mouseout", () => {
          gsap.set(escenaAdultos.scale, {
            onComplete: () => {
              gsap.to(escenaAdultos.scale, {
                x: 0.85,
                y: 0.85,
                z: 0.85,
                duration: 0.2,
                ease: "none",
              });
            },
          });
        });

        // ScrollTrigger of scenes

        
      }
    });
</script>

<canvas
  id="model1"
  class="max-w-full max-h-full pointer-events-auto   absolute top-0 left-0"
></canvas>
